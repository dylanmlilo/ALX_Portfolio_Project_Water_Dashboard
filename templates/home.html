{% extends 'index.html' %}

{% block content %}
<div class="main_container">
  <div class="main-heading">
    <h1>City of Bulawayo Water Department</h1>
    <h2>Water Supply and Distribution Statistics Dashboard</h2>
  </div>
  <div class="date"><h2>{{ date }}</h2></div>
  <div class="sub-heading"><h2>Reservoir Levels</h2></div>
  <div class="row gauge_charts_container">
  <!-- Loop through gauge_json and create divs for each gauge chart -->
  {% for gauge_data in gauge_json %}
  <div id="gauge{{ loop.index }}" class="gauge_chart col-md-4 {% if loop.index == 7 %} center-chart {% endif %}"></div>
  {% endfor %}
  </div>

  <div id="graph-container1" class="graph-container"></div>
  <div id="graph-container2" class="graph-container"></div>
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
<script>
        // Load area plots
        var graph1Data = {{ graph1JSON | safe }};
        Plotly.newPlot('graph-container1', graph1Data);

        var graph2Data = {{ graph2JSON | safe }};
        Plotly.newPlot('graph-container2', graph2Data);

        // Load gauge charts
        var gaugeData = {{ gauge_json | safe }};
        gaugeData.forEach(function(data, index) {
            var divId = 'gauge' + (index + 1);
            var div = document.getElementById(divId);
            Plotly.newPlot(div, JSON.parse(data));
        });
</script>
{% endblock %}
